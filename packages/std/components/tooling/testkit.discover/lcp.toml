schemaVersion = "2.0"
id = "lcod://tooling/testkit/discover@0.1.0"
version = "0.1.0"
kind = "component"
summary = "Discover compose-based test cases following common conventions."

[palette]
category = "Testing"
icon = "mdi:folder-magnify"
tags = ["test", "automation", "discovery"]

[deps]
requires = [
  "lcod://tooling/script@1",
  "lcod://tooling/yaml/parse@0.1.0",
  "lcod://contract/core/fs/list-dir@1",
  "lcod://contract/core/fs/read-file@1",
  "lcod://axiom/path/join@1",
  "lcod://axiom/toml/parse@1"
]

[inputs.root]
summary = "Relative path (from projectRoot) where testkit cases live (default: tests/testkit)."
required = false
schema = """{"type":"string"}"""

[inputs.projectRoot]
summary = "Absolute path to the repository root containing tests/testkit (defaults to working directory)."
required = false
schema = """{"type":"string"}"""

[inputs.projectPath]
summary = "Alias for projectRoot maintained for compatibility."
required = false
schema = """{"type":"string"}"""

[inputs.defaultKernels]
summary = "Fallback kernel list when a test does not specify explicit targets."
required = false
schema = """{"type":"array","items":{"type":"string"}}"""

[inputs.directories]
summary = "Optional subset of directories (relative to root) to scan. Defaults to all."
required = false
schema = """{"type":"array","items":{"type":"string"}}"""

[inputs.includeHidden]
summary = "Include tests whose descriptor sets discoverable=false (default: false)."
required = false
schema = """{"type":"boolean"}"""

[outputs.tests]
summary = "Discovered test specifications (id, name, kernels, composePath, metadata)."
schema = """{"type":"array","items":{"type":"object"}}"""
