{
  "schemaVersion": "1.0",
  "id": "lcod://pkg/std/tooling.registry_catalog.collect.test@0.1.0",
  "kind": "test",
  "tests": [
    {
      "name": "collects registry lines",
      "compose": [
        {
          "call": "lcod://tooling/registry_catalog/collect@0.1.0",
          "in": {
            "rootPath": "./tests/fixtures/registry",
            "catalogPath": "catalog.json"
          },
          "out": {
            "result": "$"
          }
        }
      ],
      "expected": {
        "result": {
          "packages": [
            {
              "id": "lcod://example/pkg",
              "versions": [
                {
                  "version": "1.0.0",
                  "manifest": "packages/example/pkg/1.0.0/manifest.json",
                  "registryId": "main",
                  "priority": null
                }
              ]
            }
          ],
          "packagesJsonl": "{\"kind\":\"registry\",\"id\":\"main\",\"type\":\"git\",\"url\":\"https://github.com/example\"}\n{\"kind\":\"component\",\"id\":\"lcod://example/pkg\",\"version\":\"1.0.0\",\"manifest\":\"packages/example/pkg/1.0.0/manifest.json\",\"registryId\":\"main\"}\n",
          "registryJson": {
            "schema": "lcod-registry@1",
            "registries": [
              {
                "id": "main",
                "type": "git",
                "url": "https://github.com/example"
              }
            ],
            "namespaces": {},
            "packages": {
              "lcod://example/pkg": {
                "registry": "main"
              }
            }
          },
          "warnings": []
        }
      }
    }
  ]
}
